<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ATM System Login: Input Pin</title>
    <meta name="description" content="Flat UI Kit Free is a Twitter Bootstrap Framework design and Theme, this responsive framework includes a PSD and HTML version."/>

    <meta name="viewport" content="width=1000, initial-scale=1.0, maximum-scale=1.0">

    <!-- Loading Bootstrap -->
    <link href="dist/css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Loading Flat UI -->
    <link href="dist/css/flat-ui.css" rel="stylesheet">
    <link href="docs/assets/css/demo.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">

    <link rel="shortcut icon" href="img/favicon.ico">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="dist/js/vendor/html5shiv.js"></script>
      <script src="dist/js/vendor/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="demo-headline" style="padding:0px;">
        <h1 class="demo-logo">ATM
          <small>24 Hour Banking</small>
        </h1>
      </div> <!-- /demo-headline -->
      <div class="row">
        <div class="col-xs-12" id="screenView">
          <!-- Place <h1></h1> below -->

          <!-- Replace Video with Animated Gif or Animated SVG -->
          <div class="row">
            <div class="col-xs-8 text-center" style="border-right:solid 3px #CCC">
              <h1 class="demo-section-title text-uppercase text-center">Input Your Pin Number</h1>
              <input type="text" id="userPinInput" class="form-control" disabled/>
              <!-- TABLE -->
              <div id="pinPad">
                <table>
                  <tr>
                    <td><a id="btn1" href="#" class="btn btn-block btn-lg btn-inverse">1</a></td>
                    <td><a id="btn2" href="#" class="btn btn-block btn-lg btn-inverse">2</a></td>
                    <td><a id="btn3" href="#" class="btn btn-block btn-lg btn-inverse">3</a></td>
                  </tr>
                  <tr>
                    <td><a id="btn4" href="#" class="btn btn-block btn-lg btn-inverse">4</a></td>
                    <td><a id="btn5" href="#" class="btn btn-block btn-lg btn-inverse">5</a></td>
                    <td><a id="btn6" href="#" class="btn btn-block btn-lg btn-inverse">6</a></td>
                  </tr>
                  <tr>
                    <td><a id="btn7" href="#" class="btn btn-block btn-lg btn-inverse">7</a></td>
                    <td><a id="btn8" href="#" class="btn btn-block btn-lg btn-inverse">8</a></td>
                    <td><a id="btn9" href="#" class="btn btn-block btn-lg btn-inverse">9</a></td>
                  </tr>
                  <tr>
                    <td><a id="btn0" href="#" class="btn btn-block btn-lg btn-inverse">0</a></td>
                    <td colspan="2"><a id="btnClear" href="#" class="btn btn-block btn-lg btn-default text-uppercase">Clear</a></td>
                    
                  </tr>
                </table>
              </div><!-- // Pin Pad -->
              
              <div id="confirmPin">
                <a id="confirmButton" href="#" class="btn btn-block btn-lg btn-success text-uppercase">Confirm</a>
              </div>
              <div id="cancelTransaction">
                <a  id="cancelButton" href="#" class="btn btn-block btn-lg btn-danger text-uppercase"><span class="fui-cross"></span> Cancel</a>
              </div><!-- // Pin Pad -->
            </div> 


            <div class="col-xs-4">
              <div style="margin-top:8rem; margin-bottom: 5rem;">
                <img src="img/CardInsertedGreenLight.png" style="width:16em;"/>
                <h1 class="demo-section-title text-uppercase text-center">Account</h1>
                <input type="text" id="userAccountInput" class="form-control"/>
              <!-- TABLE -->
              </div>
            </div><!-- /.col-xs-4 -->

            
          </div><!-- // END login screen  -->
      </div><!--  // END column-->
  </div><!-- // END row-->

      


    </div> <!-- /container -->

    

    <script src="dist/js/vendor/jquery.min.js"></script>
    <script src="dist/js/vendor/video.js"></script>
    <script src="dist/js/flat-ui.min.js"></script>
    <script src="docs/assets/js/application.js"></script>

    <script>
      videojs.options.flash.swf = "dist/js/vendors/video-js.swf"
    </script>

    <script>
      document.getElementById("btn1").addEventListener("click", function(){renderNumber(1)});
      document.getElementById("btn2").addEventListener("click", function(){renderNumber(2)});
      document.getElementById("btn3").addEventListener("click", function(){renderNumber(3)});
      document.getElementById("btn4").addEventListener("click", function(){renderNumber(4)});
      document.getElementById("btn5").addEventListener("click", function(){renderNumber(5)});
      document.getElementById("btn6").addEventListener("click", function(){renderNumber(6)});
      document.getElementById("btn7").addEventListener("click", function(){renderNumber(7)});
      document.getElementById("btn8").addEventListener("click", function(){renderNumber(8)});
      document.getElementById("btn9").addEventListener("click", function(){renderNumber(9)});
      document.getElementById("btn0").addEventListener("click", function(){renderNumber(0)});

      document.getElementById("btnClear").addEventListener("click", deleteInput);
      //document.getElementById("confirmButton").addEventListener("click", confirmPin);

      function renderNumber(num){
        //console.log(num);
        document.getElementById("userPinInput").value = document.getElementById("userPinInput").value + num;
      }

      function deleteInput(){
        console.log("canceeel");
        document.getElementById("userPinInput").value = "";
        document.getElementById("userAccountInput").value = "";
      }


    </script>
<script src="/socket.io/socket.io.js"></script>
  <script>
        var socket = io.connect('http://localhost:3000',{
            forceNew:true,
        });
    //
    
    var confirmBtn = document.getElementById('confirmButton');
    //var input = document.getElementById('input');

    confirmBtn.addEventListener('click', function(e) {
      e.preventDefault();
      //if (pin) {
        //socket.emit('chat message', input.value);
        var pin = document.getElementById("userPinInput").value;
        var account = document.getElementById("userAccountInput").value;
        var userData = {account:account, password:pin}
        //sessionStorage.setItem("userData", userData);
        localStorage.setItem("userData", userData);

        socket.emit('pin_check', userData);
        //input.value = '';
        //redireccionar
      //}
    });
  
    socket.on('pin_check', function(msg) {
      if(msg==='ok'){
        // redireccionar
        console.log("okiiii");
        window.location.href = "/home";
      }
      else{
        console.log("pailas");
        alert("Wrong password");
      }

    });
  </script>




  </body>
</html>
